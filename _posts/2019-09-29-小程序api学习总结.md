---
layout: post
#标题配置
title:  ajax
#时间配置
date:   2019-10-09 13:55:00 +0800
#大类配置
categories: 微信小程序
#小类配置
tag: 小程序api
---

* content
{:toc}

基础部分
==========

有关系统和兼容性的
-------
查看小程序的api参数回调组件等等等等是否能在这个版本使用：wx.canIUse()这是一个bool的变量。

把ArrayBuffer和Base64相互转换用：wx.base64ToArrayBuffer();wx.arrayBufferToBase64()

获取系统信息，有同步和不同步版本。同步的：wx.getSystemInfoSync()不同步：wx.getSystemInfo，有三种回调，成功，失败，和调用结束

版本更新
-------
全局唯一的版本更新管理器，用wx.getUpdateManager()，它的实例中有许多相关的更新操作。

定时器
-------

刚进项目就遇到了一个要用定时器的地方，做一个抽奖的九宫格，有个抽奖动画。我一开始用了for循环遍历数组，并且嵌套两个settimeout。这个写法不是很好，后来被前辈改正，去掉了for循环，使用setinterval进行周期性循环，并且合理的搭配settimeout和clear进行异步的动画效果。

路由
=======

tabbar路由
-----

通过跳转到tabbar的页面而不是非tabbar

打开一个页面后关闭所有页面
------
wx.reLaunch（）

关闭当前页面并跳转其他非tabbar页面
------
wx.redirectTo()

保留当前页面并跳转到新得页面
------
wx.navigateTo()

关闭当前页面，也就是说返回上一个页面
-----
wx.navigateBack()

弹出的提示
========

弹出一个没有按钮的消息弹出框，可以有图标也可以只是文字
-------
wx.showToast()   隐藏用： wx.hideToast

弹一个有按钮的弹出框
------
wx.showModal（）

加载中提示框
-----
wx.showLoading 隐藏用wx.hideLoading

导航栏
=====

动态的显示和隐藏导航栏加载动画
-------

wx.showNavigationBarLoading，wx.hideNavigationBarLoading

动态设置导航的标题
------
wx.setNavigationBarTitle

动态设置导航标题的背景颜色
--------

wx.setNavigationBarColor

动态的隐藏掉回首页的标题按钮
-----
wx.hideHomeButton(）

以下是tabbar
--------

可以为tabbar显示红点，动画显示tabbar，设置tabbar样式，

界面
======

下拉刷新
------
开始和结束：wx.startPullDownRefresh（）和wx.stopPullDownRefresh（）

滚动页面到某位置
-----
可以到某个选择器或者滚动多少距离wx.pageScrollTo

置顶
------
在置顶时是显示置顶文字，没被置顶时也会调用成功但是不显示置顶文字，wx.setTopBarText

键盘
-----
在用户点击input，textarea时，会拉起键盘，可以用wx.onKeyboardHeightChange来监听键盘高度的变化。
键盘出现后，可以通过wx.hideKeyboard手动的把键盘给收起，
在input和textarea获得焦点focus的时候，可以获得焦点的位置wx.getSelectedTextRange()


动画
=======

首先创建动画实例
-------
wx.createAnimation（）

通过实例化的动画对象动态的对动画的css进行改变，例如
Animation.height
Animation.left
Animation.matrix

网络
========

请求
------
官方用的是wx.request。

在我们的项目里，有封装好request请求，所以直接调用app.wptRequest，并且可以通过method来直接写明请求方法。

下载
-----
实例化一个下载，wx.downloadFile，其中URL必填。



