---
layout: post
#标题配置
title:  11月学习计划之---WXS
#时间配置
date:   2019-11-09 09:58:00 +0800
#大类配置
categories: 微信小程序
#小类配置
tag: XMl
---

* content
{:toc}

介绍
=====
wxs
-----
据官方说法，WXS是与js不同的语言，有自己的语法，不与JavaScript一致。
本质上说，wxs 是一种被限制过的、运行在视图层 webview 里的 js。它并不是真的发明了一种新语言

为什么创造WXS
-------
由于微信小程序的运行环境，是分为逻辑层和视图层。

WXML 模板和 WXSS 样式工作在视图层，界面使用 WebView 进行渲染。
JavaScript 代码工作在逻辑层，运行在 JsCore 或 v8 里。
好处：逻辑层的阻塞不会影响渲染和用户交互

缺点：他们二者之间不能直接相对操作，数据更新及事件系统只能靠线程间通讯，但跨线程通信的成本极高，特别是需要频繁通信的场景。

一次的交互响应要通过： 视图层、Native、逻辑层之间两个来回的通讯。


WXS的特征及其应用场景
======
特征
-----
1. wxs是可以在视图层运行的js
2. 不能修改数据，只能对当前XHTML内的class和style进行修改
3. 他是被限制过得js，能进行一些简单的运算
4. 能够监听touch，滚动，拖动的交互行为。



用户交互频繁、仅需改动组件样式（比如布局位置），无需改动数据内容的场景，比如侧滑菜单、索引列表、滚动渐变等。

纯粹的逻辑计算，比如文本、日期格式化，通过 WXS 可以模拟实现 Vue 框架的过滤器。

编写wxs
======
wxs的写法通常都比较简单。

写法一 < wxs >  < /wxs >
-----
直接在xhtml里面编写。
这里的module是给wxs起名。
这里的src是引用外部的.wxs
```js
<!--wxml-->
<wxs src="./../comm.wxs" module="some_comms"></wxs>
<wxs module="foo">

var some_msg = "hello world";

module.exports = {

    msg : some_msg,

}

</wxs>
<view> {{some_comms.bar(some_comms.foo)}} </view>
<view> {{foo.msg}} </view>
```

写法二 .wxs文件
-------
使用export向外部暴露他内部的私有变量与函数。
使用require在当前.wxs中引用其他wxs文件模块。
```js
// /pages/comm.wxs
var foo = "'hello world' from comm.wxs";
var bar = function(d) {
  return d;
}
module.exports = {
  foo: foo,
  bar: bar
};
// /pages/logic.wxs

var comm = require("./comm.wxs");

console.log(comm.foo);
```

注释
======
单行注释
-----
//注释内容

多行注释
-----
/*   

注释内容
*/

结尾注释
-----
结尾后边的东西都会被注释掉
/*

没结束符

例子：





