---
layout: post
#标题配置
title:  如何在公司更好的使用git
#时间配置
date:   2019-10-23 13:55:00 +0800
#大类配置
categories: git
#小类配置
tag: 学习总结
---

* content
{:toc}

最新分支：mater => online
开发分支: develop => 当前 develop, 合并最新代码 merge master  => develop ( 未发布 + master )
自己开发分支: self => 当前 self ，merge develop develop ( 未发布 + master )

切换分支
-----

git checkout develop
git checkout -b self


开发中
---

self: 自己的代码 +  未发布 + master 

git add .
git commit


git checkout develop (其他新提交的)
git checkout self
git merge develop

git push origin self ( 自己的代码 +  未发布 + master +  其他新提交的)

wpt分支
-------
Master develop  self
Merge Request => 黄，（self => develop ）


鉴真阁分支
-----
devekop -> develop-t5 (加了环境cookit)
Git checkout develop-t5
Git merge develop

快速切换分支
-----
Git checkout develop-t5
Git checkout -b develop-t6
Cookie -> 6

快速舍弃当前git status的修改
------
第一种方法：舍弃某文件的未add的修改

首先查看修改的文件目录
```git
git status
``` 
然后用
```git
git checkout -- src/pages/apply/index.js
```
注意这里的--后边要加一个空格，然后在加上要清除修改的文件路由。

第二种方法：快速舍弃当前本地所有修改

1. 还没有add
```git
git checkout -f
```
2. 已经add过了，而且加入了暂存区
```git
git reset --hard 
git clean -xdf
```
第三种方法：快速清空工作区的所有修改

```git
git add . && git stash && git stash drop
```

发布灰度码
------

就是携带了灰度cookie的码。灰度环境理解为预发环境。发布之前后端会把接口服务发到灰度环境上，这个环境的数据跟线上环境是一致的。

就是未正式发布之前的线上环境，但是接口服务和产生数据都是真实的，预发/灰度环境用来小范围验证。

后端一致协定好的。后端接口服务如何匹配到这个cookie了，那就走灰度服务


在别的分支写代码
-------
一开始克隆好是master的代码，checkout到某分支，git pull origin 分支名,拉取某分支最新代码进行开发。

灰度接口
------
在公司用灰度看接口，首先要看接口发布到了哪个场景，有灰度场景，线上场景。

如果是灰度环境的接口查看的话，首先要进入‘https://t.weipaitang.com/home’
有一个绿色的设置log调试按钮，点击会出现一个测试框。

测试框里的数据一栏里的w代表正式线上状态，t代表测试环境状态。
比如接口发布到了灰度2环境，那么点击灰度2，再打开给的接口地址，就可查看数据。
如‘https://api.weipaitang.com/wechat-cx/v1.0/salemediacheck/check-content?content=%E5%88%81%E8%BF%91%E5%B9%B3’。
在普通情况下是打不开这个网址的，

toast
-----
由于封装过toast，所以现在toast是自动带一个确定按钮的，如果在接口里面需要toast不提示的，那么需要在请求中加一个isfail: true







