---
layout: post
#标题配置
title:  你不知道的JavaScript
#时间配置
date:   2020-06-17 15:16:00 +0800
#大类配置
categories: JavaScript
#小类配置
tag: 《你不知道的JavaScript》-中册
---

* content
{:toc}

0.1+0.2 === 0.3 //  false
因为JavaScript里面的数字是浮点数，0.1+0.2 ~= 0.30000000004 所以不会全等于0.3
那么怎么去相等呢，使用：`Math.abs(0.1+0.2, 0.3) < Number.EPSILON`（指定误差范围。）

某些状态下，可以通过返回void，来保证不误报。这种返回值是undefined。
例如：
```js
setTimeout(()=>{console.log('1')}, 100);
return;

--------

return void setTimeout(()=>{console.log('1')}, 100);
```

注意isNaN()函数，尽量使用时，先规定只能允许检测数字类型。否则通过isNaN来检测字符串时都会返回true。
尽量用`Number.isNaN(）`

数组的浅拷贝，`let a = [1,2,3].slice()`
和别的语言不一样，基础类型是复制值，引用类型通过引用复制来赋值传递。他们不能指向别的变量/引用，只能指向值。

用== 和===需注意的
-----
两侧有true或者false时，千万不要使用==，全用===。
两侧有'',[],0时，尽量不使用==。
总结其实最好就是都用===，维护代码的人也看的清晰易懂。

一般定义正则就用常量的形式定义正则表达式即可。如果遇到需要动态改变的正则表达式，再用`New RegExp()`

转换字符串
----
```js
true.toString(); // "true"
null.toString(); // "null"
undefined.toString(); // "undefined"
```

极大值转换：
```js
var n = 1.07 * 1000 * 1000 * 1000 * 1000 * 1000 * 1000 * 1000;
n.toString(); // "1.07e21"
```
数组的字符串用','连起串化
```js
var a = [1,2,3];
a.toString(); // "1,2,3"
```
json转化字符串：
```js
JSON.stringify({a:1}); // "{"a":12}"
// 需注意，undefined，symbol，function是不会被转化的
JSON.stringify({undefined, Symbol, function(){}}); // "{}"
// ----黑科技---- JSON.stringify(转化值 [, replace]); replace可选参数
var n = {
    a: "a",
    b: 2,
    c: [1,2,3]
};
JSON.stringify(n, ["a","c"]);// 过滤对象中key是a，c组成的字符串
// "{"a":"a", "c":[1,2,3]}"
JSON.stringify(n, function(key, value){
    if(key === "b") return value;
})
// "{"b":2}"
```




